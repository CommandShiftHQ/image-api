<!DOCTYPE html>
<html>
  <head>
    <title>Manchester Codes Image Sharing API</title>
    <!-- <link rel="stylesheet" type="text/css" href="index.css"> -->
  </head>
  <body>
    <main>
      <h1>Manchester Codes Image Sharing API</h1>

      <section id="endpoints">
        <h2>Endpoints</h2>

        <section id="auth">
          <h3>Authentication</h3>
          <p>Users can authenticate themselves using either an email/password or with </p>
          <section id="post-auth-login">
            <h3><code>POST /auth/login</code></h3>
            <p>Logs a user in with an email and password</p>
            <h4>Request Params:</h4>
            <ul>
              <li><code>email</code> - users email address</li>
              <li><code>password</code> - users password</li>
            </ul>
            <h4>Response:</h4>
            <ul>
              <li><code>token</code> - JWT containing the users details</li>
            </ul>
          </section>
          <section id="post-auth-google">
            <h3><code>POST /auth/google</code></h3>
            <p>Logs a user in, or creates a new users account if one doesn't exist with the selected email address</p>
            <p>To authenticate with Google, you should redirect the user to the following URL:</p>
            <p><code>https://accounts.google.com/o/oauth2/v2/auth</code></p>
            <p>with the following query params:
              <ul>
                <li>
                  <code>
                    scope: https://www.googleapis.com/auth/plus.me https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email
                  </code>
                </li>
                <li>
                  <code>
                    redirect_uri: http://localhost:8080/google-auth
                  </code>
                </li>
                <li>
                  <code>
                    client_id: Ask a tutor for this credential.
                  </code>
                </li>
              </ul>
            </p>

            <p>
              This will redirect back to your client application with either a <code>code</code> or <code>error</code> query parameter.
            </p>
            <p>
              If a code is returned, this should be forwarded to the <code>/auth/google</code> API endpoint.
              If an error is returned, this should be handled in the client.
            </p>
            <h4>Request Params:</h4>
            <ul>
              <li><code>code</code> - temporary auth token provided by Google</li>
            </ul>
            <h4>Response:</h4>
            <ul>
              <li><code>token</code> - JWT containing the users details</li>
            </ul>
          </section>
        </section>

        <section id="users">
          <h3>Users</h3>
          <section id="post-users">
            <h3><code>POST /users</code></h3>
            <p>Creates a new user</p>
            <h4>Request Headers:</h4>
            <ul>
              <li>
                <code>Content-Type</code> - either <code>application/json</code> (if no image is present) or <code>multipart/form-data</code> (if image is present)
              </li>
            </ul>
            <h4>Request Params:</h4>
            <ul>
              <li><code>firstName</code> - string -  users first name - required</li>
              <li><code>lastName</code> - string - users email address - required</li>
              <li><code>email</code> - string - users email address - required</li>
              <li><code>password</code> - string - users password - required</li>
              <li><code>avatar</code> - file - profile image. Valid mimetypes include 'image/jpeg', 'image/png' and 'image/gif' - optional</li>
            </ul>
            <h4>Response:</h4>
            <ul>
              <li>
                <code>_id</code> - string - users unique id
              </li>
              <li>
                <code>firstName</code> - string - users first name
              </li>
              <li>
                <code>lastName</code> - string - users last name
              </li>
              <li>
                <code>avatar</code> - string - URL of users avatar
              </li>
              <li>
                <code>images</code> - array - array of images - see image endpoints for more details.
              </li>
            </ul>
          </section>
          <section id="get-users-id">
            <h3><code>GET /users/:id</code></h3>
            <p>Returns the profile of a user with the given ID</p>
            <h4>Request Headers:</h4>
            <ul>
              <li>
                <code>Authorization</code> - a valid JWT (optional). If provided, the returned image data will contain details of whether the authenticated user has liked the image.
              </li>
            </ul>
            <h4>Route Params:</h4>
            <ul>
              <li><code>id</code> - A valid user ID</li>
            </ul>
            <h4>Response:</h4>
            <ul>
              <li>
                <code>_id</code> - string - users unique id
              </li>
              <li>
                <code>firstName</code> - string - users first name
              </li>
              <li>
                <code>lastName</code> - string - users last name
              </li>
              <li>
                <code>avatar</code> - string - URL of users avatar
              </li>
              <li>
                <code>images</code> - array - array of images belonging to the user - see image endpoints for more details.
              </li>
            </ul>
          </section>
          <section id="get-me">
            <h3><code>GET /me</code></h3>
            <p>Returns the profile of the authenticated user</p>
            <h4>Request Headers:</h4>
            <ul>
              <li>
                <code>Authorization</code> - required - a valid JWT.
              </li>
            </ul>
            <h4>Response:</h4>
            <ul>
              <li>
                <code>_id</code> - string - users unique id
              </li>
              <li>
                <code>firstName</code> - string - users first name
              </li>
              <li>
                <code>lastName</code> - string - users last name
              </li>
              <li>
                <code>email</code> - string - users email address
              </li>
              <li>
                <code>avatar</code> - string - URL of users avatar
              </li>
              <li>
                <code>images</code> - array - array of images belonging to the user - see image endpoints for more details.
              </li>
            </ul>
          </section>
        </section>
      </section>
    </main>
  </body>
</html>

